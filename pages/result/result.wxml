<!-- pages/result/result.wxml -->
<view class="container">
  
  <!-- 1. æˆç»©å¤§å¡ç‰‡ -->
  <view class="result-card">
    <view class="card-header">
      <text class="grade-tag">{{gradeName}}</text>
      <text class="date">{{formattedDate || 'åˆšåˆš'}}</text>
    </view>

    <!-- åˆ†æ•°å±•ç¤ºåŒºåŸŸ -->
    <view class="score-section">
      <view class="score-circle">
        <text class="score-num">{{score}}</text>
        <text class="score-label">æœ€ç»ˆå¾—åˆ†</text>
      </view>
      
      <!-- [æ–°å¢] ç§¯åˆ†æ ‡ç­¾æ”¾åœ¨åœ†åœˆä¸‹é¢ï¼Œé¼“åŠ±è¯­ä¸Šé¢ -->
      <view class="points-badge" wx:if="{{earnedPoints > 0}}">
        âœ¨ ç§¯åˆ† +{{earnedPoints}}
      </view>

      <text class="cheer-text">{{cheerMsg}}</text>
    </view>

    <!-- è¯¦ç»†æ•°æ®ç½‘æ ¼ -->
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-val">{{correctCount}}</text>
        <text class="stat-key">ç­”å¯¹</text>
      </view>
      <view class="stat-item">
        <text class="stat-val wrong">{{wrongCount}}</text>
        <text class="stat-key">ç­”é”™</text>
      </view>
      <view class="stat-item">
        <text class="stat-val">{{correctRate}}%</text>
        <text class="stat-key">æ­£ç¡®ç‡</text>
      </view>
      <view class="stat-item">
        <text class="stat-val time">{{time}}</text>
        <text class="stat-key">è€—æ—¶</text>
      </view>
    </view>
  </view>

  <!-- ============================================ -->
  <!-- 2. ä¸Šä¼ çŠ¶æ€æç¤º -->
  <!-- ============================================ -->
  <view class="upload-status" wx:if="{{score > 0}}">
    <!-- æƒ…å†µA: æ­£å¼ç”¨æˆ· (å·²è®¾ç½®æ˜µç§°) -->
    <block wx:if="{{!isAnonymous}}">
      <icon type="success" size="14" color="#2ecc71"></icon>
      <text>æˆ˜ç»©å·²è‡ªåŠ¨ä¸Šä¼ è‡³æ’è¡Œæ¦œ</text>
    </block>
    
    <!-- æƒ…å†µB: åŒ¿åç”¨æˆ· (æ— æ˜µç§°) -->
    <block wx:else>
      <icon type="info" size="14" color="#f39c12"></icon>
      <text style="color: #e67e22;">æœªè®¾ç½®æ˜µç§°ï¼Œæˆç»©æœªä¸Šæ¦œ</text>
    </block>
  </view>

  <!-- 3. æŒ‰é’®åŠŸèƒ½åŒº -->
  <view class="action-box">
    
    <!-- ç¬¬ä¸€è¡Œï¼šæ ¸å¿ƒæ“ä½œ -->
    <view class="primary-btns">
      <button class="btn rank-btn" bindtap="goToRank">
        <text>ğŸ† æŸ¥çœ‹æ¦œå•</text>
      </button>
      <button class="btn share-btn" open-type="share">
        <text>ğŸ‰ åˆ†äº«æˆç»©</text>
      </button>
    </view>
    
    <!-- ç¬¬äºŒè¡Œï¼šå¯¼èˆªæ“ä½œ -->
    <view class="secondary-btns">
      <button class="btn nav-btn" bindtap="restartPractice">ğŸ”„ å†ç»ƒä¸€æ¬¡</button>
      <button class="btn nav-btn" bindtap="viewHistory">ğŸ“… å†å²è®°å½•</button>
      <button class="btn nav-btn" bindtap="goHome">ğŸ  è¿”å›é¦–é¡µ</button>
    </view>

  </view>
</view>
<!-- pages/result/result.wxml -->
<view class="container">
  <view class="result-card">
    <!-- æ ‡é¢˜ -->
    <view class="header">
      <text class="title">ç»ƒä¹ å®Œæˆ</text>
      <text class="subtitle">{{gradeName}} - {{formattedDate}}</text>
    </view>
    
    <!-- æˆç»©å±•ç¤º -->
    <view class="score-display">
      <view class="score-circle">
        <text class="score-main">{{score}}/{{total}}</text>
        <text class="score-rate">æ­£ç¡®ç‡ï¼š{{correctRate}}</text>
      </view>
      
      <!-- æˆç»©è¯„ä»· -->
      <view class="score-evaluation">
        <text class="evaluation-text">{{message}}</text>
        <view class="score-details">
          <view class="detail-item">
            <text class="detail-label">æ­£ç¡®é¢˜ç›®</text>
            <text class="detail-value correct">{{correctCount}} é¢˜</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">é”™è¯¯é¢˜ç›®</text>
            <text class="detail-value wrong">{{wrongCount}} é¢˜</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">ç”¨æ—¶</text>
            <text class="detail-value time">{{time}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">å¹³å‡ç”¨æ—¶</text>
            <text class="detail-value avg-time">{{averageTime}} ç§’/é¢˜</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- ç­‰çº§å¾½ç«  -->
    <view class="badge-section" wx:if="{{showBadge}}">
      <text class="badge-title">ğŸ† è·å¾—å¾½ç« </text>
      <view class="badge-container">
        <view class="badge {{badgeClass}}">
          <text class="badge-text">{{badgeText}}</text>
        </view>
      </view>
    </view>
    
    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="btn restart-btn" bindtap="restart">
        <icon type="refresh" size="18"></icon>
        é‡æ–°ç»ƒä¹ 
      </button>
      <button class="btn home-btn" bindtap="goHome">
        <icon type="home" size="18"></icon>
        è¿”å›é¦–é¡µ
      </button>
      <button class="btn history-btn" bindtap="viewHistory">
        <icon type="history" size="18"></icon>
        æŸ¥çœ‹å†å²
      </button>
      <button class="btn share-btn" open-type="share">
        <icon type="share" size="18"></icon>
        åˆ†äº«æˆç»©
      </button>
    </view>
    
    <!-- å†å²è®°å½•é¢„è§ˆ -->
    <view class="history-preview" wx:if="{{recentHistory.length > 0}}">
      <view class="preview-header">
        <text class="preview-title">ğŸ“Š æœ€è¿‘ç»ƒä¹ è®°å½•</text>
        <button class="view-all-btn" bindtap="viewHistory">æŸ¥çœ‹å…¨éƒ¨</button>
      </view>
      <view class="preview-list">
        <view class="preview-item" wx:for="{{recentHistory}}" wx:key="date" wx:for-item="record">
          <view class="preview-grade">{{record.gradeName || record.grade + 'å¹´çº§'}}</view>
          <view class="preview-score">{{record.score}}/{{record.total}}</view>
          <view class="preview-rate">{{record.correctRate}}</view>
          <view class="preview-date">{{formatPreviewDate(record.date)}}</view>
        </view>
      </view>
    </view>
    
    <!-- é¼“åŠ±è¯­å¥ -->
    <view class="encouragement">
      <text class="encouragement-text">ğŸ’ª åšæŒç»ƒä¹ ï¼Œæ•°å­¦ä¼šè¶Šæ¥è¶Šæ£’ï¼</text>
    </view>
  </view>
</view>
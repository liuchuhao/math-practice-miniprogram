<view class="game-container" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
  
  <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
  <view class="game-header" wx:if="{{gameState === 'memorizing' || gameState === 'answering'}}">
    <view class="header-item">
      <text class="header-label">ç­‰çº§</text>
      <text class="header-value">{{level}}/10</text>
    </view>
    <view class="header-item">
      <text class="header-label">å¾—åˆ†</text>
      <text class="header-value large">{{score}}</text>
    </view>
    <view class="header-item">
      <text class="header-label">å¯¹/é”™</text>
      <text class="header-value">{{correctCount}}/{{wrongCount}}</text>
    </view>
    <view class="timer-box {{timeWarning ? 'warning' : ''}}">
      <text class="header-value">{{totalTime}}s</text>
    </view>
  </view>

  <!-- å¼€å§‹ç•Œé¢ -->
  <view class="start-screen" wx:if="{{gameState === 'ready'}}">
    <text class="game-icon">ğŸ¤ </text>
    <text class="game-title">Qè¶£å¤´åƒ</text>
    <text class="game-desc">è®°ä½æ‰€æœ‰å¤´åƒï¼Œæ‰¾å‡ºæ¶ˆå¤±çš„é‚£ä¸ª</text>
    <text class="game-tip">ç­”å¯¹åŠ åˆ†å‡çº§ï¼Œç­”é”™æ‰£åˆ†é™çº§ï¼</text>
    
    <view class="diff-section">
      <text class="diff-title">é€‰æ‹©éš¾åº¦</text>
      <view class="diff-options">
        <view class="diff-btn {{difficulty === 'easy' ? 'active' : ''}}" bindtap="onDiffChange" data-diff="easy">
          <text class="icon">ğŸŒŸ</text>
          <text class="name">ç®€å•</text>
        </view>
        <view class="diff-btn {{difficulty === 'medium' ? 'active' : ''}}" bindtap="onDiffChange" data-diff="medium">
          <text class="icon">â­</text>
          <text class="name">ä¸­ç­‰</text>
        </view>
        <view class="diff-btn {{difficulty === 'hard' ? 'active' : ''}}" bindtap="onDiffChange" data-diff="hard">
          <text class="icon">ğŸ’«</text>
          <text class="name">å›°éš¾</text>
        </view>
      </view>
    </view>
    
    <button class="start-btn" bindtap="onStart">å¼€å§‹æ¸¸æˆ</button>
  </view>

  <!-- è®°å¿†é˜¶æ®µ -->
  <view class="memory-screen" wx:if="{{gameState === 'memorizing'}}">
    <view class="phase-hint">
      <text class="hint-icon">ğŸ‘€</text>
      <text class="hint-text">è®°ä½è¿™äº›å¤´åƒ</text>
    </view>
    
    <view class="avatar-grid grid-{{gridSize}}">
      <view wx:for="{{displayAvatars}}" wx:key="emoji" class="avatar-card">
        <text class="avatar-emoji">{{item.emoji}}</text>
        <text class="avatar-name">{{item.name}}</text>
      </view>
    </view>
    
    <view class="memory-bar">
  <!-- è¿™é‡Œç›´æ¥ä½¿ç”¨ JS ç”Ÿæˆå¥½çš„ barStyle -->
  <view class="bar-fill" style="{{barStyle}}"></view>
</view>
  </view>

  <!-- ç­”é¢˜é˜¶æ®µ -->
  <view class="answer-screen" wx:if="{{gameState === 'answering'}}">
    <view class="phase-hint">
      <text class="hint-icon">â“</text>
      <text class="hint-text">è°æ¶ˆå¤±äº†ï¼Ÿ</text>
    </view>
    
    <view class="avatar-grid grid-{{gridSize}} small">
      <view wx:for="{{remainingAvatars}}" wx:key="emoji" class="avatar-card small">
        <text class="avatar-emoji">{{item.emoji}}</text>
      </view>
    </view>
    
    <view class="options-area">
      <text class="options-label">é€‰æ‹©æ¶ˆå¤±çš„å¤´åƒ</text>
      <view class="avatar-options">
        <view 
          wx:for="{{options}}" 
          wx:key="emoji"
          class="avatar-opt {{selectedIndex === index ? (isCorrect ? 'correct' : 'wrong') : ''}}"
          bindtap="onSelect" 
          data-index="{{index}}">
          <text class="opt-emoji">{{item.emoji}}</text>
          <text class="opt-name">{{item.name}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åé¦ˆæç¤º -->
  <view class="feedback-toast {{showFeedback ? 'show' : ''}} {{isCorrect ? 'correct' : 'wrong'}}" wx:if="{{showFeedback}}">
    <text class="toast-icon">{{isCorrect ? 'âœ“' : 'âœ—'}}</text>
    <text class="toast-text">{{isCorrect ? 'è®°å¿†æ­£ç¡®ï¼' : 'è®°é”™äº†ï¼Œæ˜¯' + missingAvatar.emoji + missingAvatar.name}}</text>
  </view>

  <!-- ç»“æŸç•Œé¢ -->
  <view class="end-screen" wx:if="{{gameState === 'ended'}}">
    <view class="end-card">
      <text class="end-icon">ğŸ†</text>
      <text class="end-title">æ—¶é—´åˆ°ï¼</text>
      
      <view class="score-section">
        <view class="score-row">
          <text class="score-label">æ¸¸æˆå¾—åˆ†</text>
          <text class="score-value">{{score}}</text>
        </view>
        <view class="reward-row">
          <text class="reward-label">ğŸ å¥–åŠ±ç§¯åˆ†</text>
          <text class="reward-value">+{{reward}}</text>
        </view>
      </view>
      
      <view class="stats-grid">
        <view class="stat-box">
          <text class="stat-num">{{level}}</text>
          <text class="stat-label">è¾¾åˆ°ç­‰çº§</text>
        </view>
        <view class="stat-box">
          <text class="stat-num">{{correctCount}}/{{questionCount}}</text>
          <text class="stat-label">æ­£ç¡®/æ€»é¢˜</text>
        </view>
        <view class="stat-box">
          <text class="stat-num">{{accuracy}}%</text>
          <text class="stat-label">æ­£ç¡®ç‡</text>
        </view>
      </view>
      
      <view class="rank-box">
        <text class="rank-emoji">{{rankEmoji}}</text>
        <text class="rank-text">{{rankText}}</text>
      </view>
      
      <view class="btn-group">
        <button class="btn-retry" bindtap="onRetry">å†ç©ä¸€æ¬¡</button>
        <button class="btn-back" bindtap="onBack">è¿”å›</button>
      </view>
    </view>
  </view>
</view>
/* pages/history/history.wxss */
page {
  background-color: #f5f7fa;
  /* 禁止页面横向滚动 */
  overflow-x: hidden; 
  width: 100%;
}

.container {
  min-height: 100vh;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  /* ✅ 修复1: 调整顺序，防止被覆盖 */
  padding: 0;
  padding-bottom: calc(20rpx + env(safe-area-inset-bottom, 0));
  width: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
}

/* ============ Tabs 切换栏 ============ */
.tabs-header {
  display: flex;
  background: white;
  width: 100%;
  height: 90rpx;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 4rpx 10rpx rgba(0,0,0,0.05);
  margin: 0; 
  padding: 0;
}

.tab-item {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 30rpx;
  color: #7f8c8d;
  font-weight: bold;
  position: relative;
  transition: all 0.3s;
}

.tab-item.active {
  color: #3498db;
  background-color: #fcfdfe;
}

.tab-item.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 25%;
  width: 50%;
  height: 6rpx;
  background: #3498db;
  border-radius: 6rpx 6rpx 0 0;
}

/* ============ 内容区域容器 ============ */
.tab-content {
  padding: 20rpx;
  width: 100%;
  box-sizing: border-box;
}

/* ============ 顶部统计卡片 ============ */
.stats-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 30rpx;
  gap: 15rpx;
  width: 100%;
}

.stats-card {
  flex: 1;
  background: white;
  border-radius: 15rpx;
  padding: 20rpx 5rpx;
  text-align: center;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
  min-height: 120rpx;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-width: 0; 
}

.stats-label {
  font-size: 24rpx;
  color: #7f8c8d;
  margin-bottom: 8rpx;
  white-space: nowrap;
}

.stats-value {
  font-size: 32rpx;
  font-weight: bold;
  color: #2c3e50;
  white-space: nowrap;
}

/* ============ 筛选工具栏 ============ */
.filter-toolbar {
  background: white;
  border-radius: 15rpx;
  padding: 20rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
  width: 100%;
  box-sizing: border-box;
}

.grade-filters {
  white-space: nowrap;
  width: 100%;
  height: 60rpx;
  display: flex;
  align-items: center;
  /* ✅ 修复2: 添加横向滚动防止溢出 */
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* 隐藏滚动条保持美观 */
.grade-filters::-webkit-scrollbar {
  display: none;
}

.grade-filter-item {
  /* ✅ 修复3: 移除无效的 inline-block，改用 flex-shrink */
  flex-shrink: 0;
  padding: 8rpx 24rpx;
  margin-right: 15rpx;
  background: #f8f9fa;
  border: 1rpx solid #ddd;
  border-radius: 30rpx;
  font-size: 24rpx;
  color: #5a6c7d;
}

.grade-filter-item.active {
  background: #3498db;
  color: white;
  border-color: #3498db;
}

/* ============ 历史记录列表 ============ */
.history-item {
  background: white;
  border-radius: 15rpx;
  padding: 30rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
  width: 100%;
  box-sizing: border-box;
}

.item-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 20rpx;
  padding-bottom: 15rpx;
  border-bottom: 1rpx solid #f0f0f0;
}

.grade-badge {
  padding: 4rpx 16rpx;
  border-radius: 20rpx;
  font-size: 22rpx;
  color: white;
  font-weight: bold;
}
.grade-1 { background: #ff7675; }
.grade-2 { background: #74b9ff; }
.grade-3 { background: #55efc4; }
.grade-4 { background: #a29bfe; }
.grade-5 { background: #fd79a8; }
.grade-6 { background: #fdcb6e; }

.date { font-size: 24rpx; color: #7f8c8d; }

.item-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.score { font-size: 40rpx; font-weight: bold; color: #2c3e50; }

.details-section {
  display: flex;
  gap: 20rpx;
}

.detail-text { font-size: 24rpx; color: #5a6c7d; }

/* ============ 错题本样式 ============ */
.mistake-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20rpx;
  padding: 0 10rpx;
}

.mistake-count { font-size: 28rpx; color: #7f8c8d; font-weight: bold; }
.clear-mistake-btn { font-size: 24rpx; color: #e74c3c; background: rgba(231, 76, 60, 0.1); padding: 8rpx 20rpx; border-radius: 30rpx; }

.mistake-card {
  background: white;
  border-radius: 20rpx;
  padding: 30rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 5rpx 15rpx rgba(0,0,0,0.05);
  border-left: 8rpx solid #e74c3c;
  width: 100%;
  box-sizing: border-box;
}

.q-area {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25rpx;
  border-bottom: 2rpx dashed #f0f0f0;
  padding-bottom: 15rpx;
}

.q-text {
  font-size: 40rpx;
  font-weight: bold;
  color: #2c3e50;
  font-family: 'Courier New', monospace;
  word-break: break-all;
  flex: 1;
}

.q-badge {
  font-size: 20rpx;
  color: white;
  background: #bdc3c7;
  padding: 4rpx 10rpx;
  border-radius: 8rpx;
  margin-left: 15rpx;
  flex-shrink: 0;
}

.ans-area {
  display: flex;
  gap: 20rpx;
  margin-bottom: 25rpx;
}

.ans-box {
  flex: 1;
  background: #f8f9fa;
  border-radius: 12rpx;
  padding: 15rpx;
  text-align: center;
  width: 0; 
}

.ans-box.wrong { background: #fdf0ef; border: 1rpx solid #fadbd8; }
.ans-box.right { background: #ecf9f1; border: 1rpx solid #d5f5e3; }

.ans-label { font-size: 20rpx; color: #7f8c8d; display: block; margin-bottom: 6rpx; }
.ans-val { 
  font-size: 32rpx; 
  font-weight: bold; 
  white-space: nowrap; 
  overflow: hidden; 
  text-overflow: ellipsis; 
}
.ans-box.wrong .ans-val { color: #e74c3c; text-decoration: line-through; }
.ans-box.right .ans-val { color: #2ecc71; }

.card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.wrong-date { font-size: 22rpx; color: #bdc3c7; }

.solve-btn {
  font-size: 24rpx;
  background: white;
  color: #3498db;
  border: 2rpx solid #3498db;
  border-radius: 30rpx;
  padding: 8rpx 24rpx;
  margin: 0;
}

/* ============ 通用按钮 ============ */
.clear-section { margin: 20rpx 0; }
.clear-btn {
  width: 100%;
  background: #fef2f2;
  border: 1rpx solid #e74c3c;
  color: #e74c3c;
  font-size: 26rpx;
  border-radius: 15rpx;
}

.empty-state {
  text-align: center;
  padding: 100rpx 0;
}
.empty-desc { color: #95a5a6; font-size: 28rpx; display: block; margin-top: 20rpx; }
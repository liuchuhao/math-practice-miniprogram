<view class="local-rank">
  
  <!-- äºŒçº§Tab -->
  <view class="sub-tabs">
    <view 
      wx:for="{{tabs}}" 
      wx:key="id"
      class="sub-tab {{curTab === item.id ? 'active' : ''}}"
      bindtap="switchTab"
      data-id="{{item.id}}">
      <text class="sub-icon">{{item.icon}}</text>
      <text class="sub-name">{{item.name}}</text>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-box" wx:if="{{loading}}">
    <view class="spinner"></view>
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- æ»šåŠ¨åŒºåŸŸ -->
  <scroll-view 
    wx:else
    class="local-scroll" 
    scroll-y="{{true}}" 
    enhanced="{{true}}"
    show-scrollbar="{{false}}"
    bounces="{{true}}">
    
    <!-- ===== æ€»è§ˆ ===== -->
    <view class="panel" wx:if="{{curTab === 0}}">
      
      <view class="profile-card">
        <view class="profile-left">
          <image class="avatar" src="{{userInfo.avatarUrl || '/images/default_avatar.png'}}" mode="aspectFill"></image>
          <view class="badge">{{userTitle}}</view>
        </view>
        <view class="profile-right">
          <view class="nickname">{{userInfo.nickName || 'æ¸¸å®¢ç©å®¶'}}</view>
          <view class="stats">
            <view class="stat">
              <text class="num">{{totalScore}}</text>
              <text class="txt">æ€»ç§¯åˆ†</text>
            </view>
            <view class="stat">
              <text class="num">{{totalGamesPlayed}}</text>
              <text class="txt">åœºæ¬¡</text>
            </view>
            <view class="stat">
              <text class="num">{{brainTotalReward}}</text>
              <text class="txt">è„‘åŠ›åˆ†</text>
            </view>
          </view>
        </view>
      </view>
      
      <view class="section">
        <view class="section-title">ğŸ… æˆå°±å¾½ç« </view>
        <view class="badges">
          <view class="badge-item {{totalScore >= 100 ? '' : 'locked'}}">
            <text class="b-icon">ğŸŒŸ</text>
            <text class="b-name">åˆéœ²é”‹èŠ’</text>
          </view>
          <view class="badge-item {{totalScore >= 500 ? '' : 'locked'}}">
            <text class="b-icon">â­</text>
            <text class="b-name">å°æœ‰æˆå°±</text>
          </view>
          <view class="badge-item {{totalScore >= 1000 ? '' : 'locked'}}">
            <text class="b-icon">ğŸ†</text>
            <text class="b-name">å®åŠ›ç©å®¶</text>
          </view>
          <view class="badge-item {{totalScore >= 5000 ? '' : 'locked'}}">
            <text class="b-icon">ğŸ‘‘</text>
            <text class="b-name">ç‹è€…ä¹‹å·…</text>
          </view>
        </view>
      </view>
      
    </view>

    <!-- ===== æ•°å­¦æ¸¸æˆ ===== -->
    <view class="panel" wx:if="{{curTab === 1}}">
      <view class="game-list">
        
        <view class="game-item">
          <view class="game-head blue">
            <text class="g-icon">ğŸ”¢</text>
            <text class="g-name">èˆ’å°”ç‰¹æ–¹æ ¼</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>3Ã—3</text><text class="val">{{schulte3 ? schulte3 + 's' : '--'}}</text></view>
            <view class="rec"><text>4Ã—4</text><text class="val">{{schulte4 ? schulte4 + 's' : '--'}}</text></view>
            <view class="rec"><text>5Ã—5</text><text class="val">{{schulte5 ? schulte5 + 's' : '--'}}</text></view>
          </view>
        </view>
        
        <view class="game-item">
          <view class="game-head red">
            <text class="g-icon">ğŸ’£</text>
            <text class="g-name">æ‰«é›·ä¸“å®¶</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>æœ€å¿«</text><text class="val">{{minesweeperBest || '--'}}</text></view>
            <view class="rec"><text>é€šå…³</text><text class="val">{{minesweeperWins}}æ¬¡</text></view>
          </view>
        </view>
        
        <view class="game-item">
          <view class="game-head orange">
            <text class="g-icon">ğŸ—ï¸</text>
            <text class="g-name">æ•°å­—åå®¹é“</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>3Ã—3</text><text class="val">{{klotski3 || '--'}}</text></view>
            <view class="rec"><text>4Ã—4</text><text class="val">{{klotski4 || '--'}}</text></view>
            <view class="rec"><text>5Ã—5</text><text class="val">{{klotski5 || '--'}}</text></view>
          </view>
        </view>
        
        <view class="game-item">
          <view class="game-head purple">
            <text class="g-icon">ğŸ´</text>
            <text class="g-name">å·§ç®—24ç‚¹</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>é€šå…³</text><text class="val">{{twentyfourWins}}å…³</text></view>
            <view class="rec"><text>è¿èƒœ</text><text class="val">{{twentyfourStreak}}</text></view>
          </view>
        </view>
        
        <view class="game-item">
          <view class="game-head green">
            <text class="g-icon">ğŸ§©</text>
            <text class="g-name">æ•°ç‹¬æŒ‘æˆ˜</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>ç®€å•</text><text class="val">{{sudokuEasy}}æ¬¡</text></view>
            <view class="rec"><text>ä¸­ç­‰</text><text class="val">{{sudokuMedium}}æ¬¡</text></view>
            <view class="rec"><text>å›°éš¾</text><text class="val">{{sudokuHard}}æ¬¡</text></view>
          </view>
        </view>
        
      </view>
    </view>

    <!-- ===== å¤§è„‘å¼€å‘ ===== -->
    <view class="panel" wx:if="{{curTab === 2}}">
      
      <view class="brain-header">
        <text class="bh-icon">ğŸ§ </text>
        <view class="bh-info">
          <text class="bh-title">å¤§è„‘å¼€å‘</text>
          <text class="bh-desc">ç´¯è®¡ç§¯åˆ†ï¼š{{brainTotalReward}}</text>
        </view>
      </view>
      
      <view class="game-list">
        
        <view class="game-item">
          <view class="game-head cyan">
            <text class="g-icon">âœ¨</text>
            <text class="g-name">æ¼‚æµ®ä¹å›­</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>æœ€é«˜åˆ†</text><text class="val">{{floatingBest || '--'}}</text></view>
            <view class="rec"><text>ç­‰çº§</text><text class="val">{{floatingLevel ? 'Lv.' + floatingLevel : '--'}}</text></view>
          </view>
        </view>
        
        <view class="game-item">
          <view class="game-head green">
            <text class="g-icon">ğŸ§®</text>
            <text class="g-name">é€Ÿç®—é«˜æ‰‹</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>æœ€é«˜åˆ†</text><text class="val">{{speedMathBest || '--'}}</text></view>
            <view class="rec"><text>ç­‰çº§</text><text class="val">{{speedMathLevel ? 'Lv.' + speedMathLevel : '--'}}</text></view>
          </view>
        </view>
        
        <view class="game-item">
          <view class="game-head indigo">
            <text class="g-icon">ğŸ”¢</text>
            <text class="g-name">æ•°å­—å¯†ç </text>
          </view>
          <view class="game-records">
            <view class="rec"><text>æœ€é«˜åˆ†</text><text class="val">{{digitCodeBest || '--'}}</text></view>
            <view class="rec"><text>ç­‰çº§</text><text class="val">{{digitCodeLevel ? 'Lv.' + digitCodeLevel : '--'}}</text></view>
          </view>
        </view>
        
        <view class="game-item">
          <view class="game-head pink">
            <text class="g-icon">ğŸ¤ </text>
            <text class="g-name">Qè¶£å¤´åƒ</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>æœ€é«˜åˆ†</text><text class="val">{{qAvatarBest || '--'}}</text></view>
            <view class="rec"><text>ç­‰çº§</text><text class="val">{{qAvatarLevel ? 'Lv.' + qAvatarLevel : '--'}}</text></view>
          </view>
        </view>
        
        <view class="game-item">
          <view class="game-head red">
            <text class="g-icon">ğŸ€„</text>
            <text class="g-name">æ±‰å­—é­”æ–¹</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>æœ€é«˜åˆ†</text><text class="val">{{hanziCubeBest || '--'}}</text></view>
            <view class="rec"><text>ç­‰çº§</text><text class="val">{{hanziCubeLevel ? 'Lv.' + hanziCubeLevel : '--'}}</text></view>
          </view>
        </view>
        
        <view class="game-item">
          <view class="game-head teal">
            <text class="g-icon">ğŸ¦</text>
            <text class="g-name">åŠ¨ç‰©æ´¾å¯¹</text>
          </view>
          <view class="game-records">
            <view class="rec"><text>æœ€é«˜åˆ†</text><text class="val">{{animalPartyBest || '--'}}</text></view>
            <view class="rec"><text>ç­‰çº§</text><text class="val">{{animalPartyLevel ? 'Lv.' + animalPartyLevel : '--'}}</text></view>
          </view>
        </view>
        
      </view>
    </view>
    
    <view class="footer-tip">æ•°æ®ä»…ä¿å­˜åœ¨æœ¬åœ°ï¼Œå¸è½½åä¼šä¸¢å¤±</view>
    
  </scroll-view>
</view>
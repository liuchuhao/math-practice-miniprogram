<view class="container">
  
  <!-- 1. é¡¶éƒ¨çŠ¶æ€ -->
  <view class="status-header">
    <view class="badge {{mode}}">
      {{mode === 'normal' ? 'æ¯æ—¥ç»ƒä¹ ' : 'æ— å°½æŒ‘æˆ˜'}}
    </view>
    <view class="score-info">
      <text>ç¬¬ {{currentIndex + 1}} é¢˜</text>
      <text class="divider">|</text>
      <text class="score">å¾—åˆ†: {{correctCount * scorePerQ}}</text>
    </view>
  </view>

  <!-- 2. ç­”é¢˜å¡ç‰‡ (é€»è¾‘ä¸å˜) -->
  <block wx:if="{{!isFinished}}">
    <view class="question-card">
      <view class="q-tag">{{grade}}å¹´çº§</view>
      <text class="q-text">{{currentProblem.content}}</text>
      
      <view class="input-area">
        <text class="label">ç­”ï¼š</text>
        <input 
          class="ans-input" 
          type="digit" 
          placeholder="è¯·è¾“å…¥æ•°å­—" 
          value="{{userAnswer}}"
          bindinput="onInput"
          confirm-type="done"
          bindconfirm="submitAnswer"
          focus="{{true}}"
        />
      </view>
    </view>

    <button class="submit-btn" bindtap="submitAnswer">æäº¤ç­”æ¡ˆ</button>
  </block>

  <!-- 3. ç»“ç®—å¡ç‰‡ -->
  <block wx:else>
    <view class="finish-card">
      <view class="finish-icon">{{correctCount > 0 ? 'ğŸ‰' : 'ğŸ’ª'}}</view>
      <text class="finish-title">æœ¬æ¬¡æˆ˜ç»©</text>
      
      <view class="result-grid">
        <view class="res-item">
          <text class="num">{{correctCount}}</text>
          <text class="lbl">ç­”å¯¹é¢˜æ•°</text>
        </view>
        <view class="res-item">
          <text class="num plus">+{{correctCount * scorePerQ}}</text>
          <text class="lbl">è·å¾—ç§¯åˆ†</text>
        </view>
      </view>

      <button class="restart-btn" bindtap="restart">è¿”å›èœå•</button>
    </view>
  </block>

</view>